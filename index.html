<!DOCTYPE html>  
<html lang="en">        
<head>          
    <title>WhatsApp Bot - Pairing</title>          
    <meta name="viewport" content="width=device-width, initial-scale=1.0">          
    <meta charset="UTF-8">  
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">          
    <style>          
        /* DEEP SPACE VIOLET THEME */          
        body {           
            font-family: 'Poppins', sans-serif;           
            text-align: center;           
            background: linear-gradient(135deg, #0d001e 0%, #00000a 100%);           
            min-height: 100vh;          
            margin: 0;          
            display: flex;          
            justify-content: center;          
            align-items: center;          
            color: #f0f0ff;           
        }          
        .container {           
            width: 90%; max-width: 400px; padding: 40px;           
            background: rgba(255, 255, 255, 0.05);           
            backdrop-filter: blur(15px);           
            border-radius: 24px;           
            border: 1px solid rgba(255, 255, 255, 0.1);           
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);          
        }          
        h2 { color: #bb86fc; margin-bottom: 10px; }
        p { font-size: 0.9rem; opacity: 0.8; margin-bottom: 25px; }
        input {           
            width: 100%; padding: 15px; margin-bottom: 20px;           
            border-radius: 12px; border: none; outline: none;          
            background: rgba(255, 255, 255, 0.1); color: #fff;          
            font-size: 1rem; box-sizing: border-box;          
        }          
        button {           
            width: 100%; padding: 15px; border-radius: 12px;           
            border: none; background: #6200ee; color: white;           
            font-weight: bold; cursor: pointer; transition: 0.3s;          
        }          
        button:hover { background: #3700b3; transform: translateY(-2px); }
        #result { margin-top: 20px; font-weight: 600; }
        .code-display {           
            display: none; margin-top: 15px; padding: 15px;           
            background: #25d366; color: #000; border-radius: 10px;          
            font-family: 'Space Mono', monospace; font-size: 1.5rem;          
            letter-spacing: 5px; font-weight: bold; cursor: pointer;          
        }          
    </style>      
</head>          
<body>          
    <div class="container">          
        <h2>WhatsApp Link</h2>          
        <p>Enter your number with country code</p>          
        <input type="text" id="number" placeholder="e.g. 91xxxxxxxxxx">          
        <button onclick="requestPairingCode()">Get Pairing Code</button>          
        <div id="result"></div>          
        <div id="pairingCode" class="code-display" onclick="copyToClipboard()"></div>      
    </div>          

    <script>          
        async function requestPairingCode() {          
            const number = document.getElementById('number').value.replace(/\D/g, '');          
            const resultElement = document.getElementById('result');          
            const codeDisplay = document.getElementById('pairingCode');          

            if (!number || number.length < 10) {          
                resultElement.innerHTML = "❌ Enter valid number with country code!";          
                resultElement.style.color = '#ff4500';          
                return;          
            }          

            resultElement.innerHTML = "⏳ Generating code...";          
            resultElement.style.color = '#ffbf00';          
            codeDisplay.style.display = 'none';          

            try {      
                // URL includes number as both number and part of sessionId for uniqueness
                const response = await fetch(`/pair?number=${number}`);      
                const data = await response.json();      

                if (data.code) {      
                    resultElement.innerHTML = `✅ Code generated! <br> (Tap to Copy)`;      
                    resultElement.style.color = '#25d366';      
                    codeDisplay.innerText = data.code;      
                    codeDisplay.style.display = 'block';      
                } else {      
                    resultElement.innerHTML = `❌ Error: ${data.error}`;      
                    resultElement.style.color = '#ff4500';      
                }      
            } catch (error) {      
                resultElement.innerHTML = '⚠️ Server connection failed!';      
                resultElement.style.color = '#ff4500';      
            }      
        }    

        function copyToClipboard() {
            const code = document.getElementById('pairingCode').innerText;
            navigator.clipboard.writeText(code);
            alert("Pairing code copied: " + code);
        }
    </script>      
</body>          
</html>
